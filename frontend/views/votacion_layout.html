<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tarjetón Estudiantes - FESC Elecciones 2025</title>

    <!-- Fuentes y estilos globales -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="icon" href="../public/favicon.png" type="image/png">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="../css/tarjetones.css" />

    <!-- Componentes (header/footer) -->
    <script src="../js/components.js"></script>

    <style>
        /* Reset minimal y compensaci?n del header fijo */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            padding-top: var(--header-height);
        }

        /* Nav simple de retorno */
        .nav-bar {
            padding: 16px 60px;
            background-color: #fafafa;
            border-bottom: 1px solid #eee;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background-color: #666;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
        }

        /* T?tulo de secci?n */
        .section-title {
            max-width: 1200px;
            margin: 24px auto 0;
            padding: 0 60px;
            font-size: 28px;
            font-weight: 800;
            color: #e31e24;
        }

        /* Contenedor de planchas */
        .candidates-sections {
            max-width: 1200px;
            margin: 16px auto 60px;
            padding: 0 60px;
        }

        .planchas-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            justify-content: center;
        }

        /* 3 por fila en desktop, centrado automático en última fila */
        .planchas-grid .plancha-card {
            flex: 1 1 calc((100% - 48px) / 3);
            max-width: calc((100% - 48px) / 3);
        }

        .plancha-card {
            background: #fff;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: box-shadow .2s ease, transform .2s ease, border-color .2s ease, background .2s ease;
        }
        .plancha-card.selected { border-color: #e31e24; box-shadow: 0 10px 26px rgba(227,30,36,0.18); }
        .plancha-card.selected::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(227,30,36,0.10) 0%, rgba(183,28,28,0.18) 100%);
            pointer-events: none;
        }

        .plancha-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .plancha-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            background: #fff4f4;
            color: #b71c1c;
            border: 1px solid #f1c0c0;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 700;
        }

        .plancha-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: #e31e24;
            color: #fff;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 800;
        }

        .candidates-photos {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .candidate-photo {
            height: 200px;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
        }

        .candidates-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .candidate-info {
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 10px 12px;
        }

        .candidate-role {
            font-size: 12px;
            font-weight: 800;
            color: #b71c1c;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .candidate-name {
            font-size: 14px;
            font-weight: 700;
            color: #333;
            line-height: 1.35;
        }

        .titulo-decorado {
            font-family: 'Segoe UI', sans-serif;
            color: #d40000;
            /* rojo fuerte */
            font-style: italic;
            font-size: 3rem;
            text-align: center;
            font-weight: 500;
            letter-spacing: 1px;
            margin-top: 30px;
        }

        .subtitulo-decorado {
            font-family: 'Segoe UI', sans-serif;
            color: #d40000;
            /* rojo fuerte */
            font-size: 2rem;
            /* Full-bleed banner */
            display: block;
            width: 100vw;
            margin-left: calc(50% - 50vw);
            margin-right: calc(50% - 50vw);
            background: url("../public/graduados/banner titulo.svg") center/cover no-repeat;
            text-align: center;
            text-transform: uppercase;
            font-weight: 900;
            padding: 20px 0;
            margin-bottom: 60px;
            /* height of the band */
        }

        .imagen-tarjeton {
            text-align: center;
        }

        .imagen-tarjeton img {
            display: block;
            margin: 0 auto;
            width: 100%;
            max-width: 520px;
            height: auto;
            transition: transform 0.3s ease, filter 0.3s ease;
        }

        .imagen-tarjeton img:hover {
            transform: translateY(-10px);
        }

        /* Cuando hay selección en la sección: desaturar y desenfocar el resto */
        .planchas-grid.has-selection .plancha-card:not(.selected) .imagen-tarjeton img {
            filter: grayscale(1) blur(1px) brightness(0.95);
            transform: none;
        }

        /* Registrar voto + modal */
        .vote-actions { text-align:center; margin: 24px 0; }
        .btn-register { display:inline-flex; align-items:center; gap:8px; padding:12px 18px; border-radius:10px; border:none; cursor:pointer; font-weight:700; background: linear-gradient(135deg, #e31e24 0%, #b71c1c 100%); color:#fff; box-shadow: 0 6px 16px rgba(227,30,36,.25); }
        .btn-register:hover { transform: translateY(-2px); transition: transform .2s ease; }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: none; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
        .modal-overlay.show { display: flex; }
        .modal { background: #fff; border-radius: 12px; max-width: 560px; width: 100%; padding: 20px; box-shadow: 0 12px 28px rgba(0,0,0,.25); }
        .modal h3 { margin: 0 0 10px; font-size: 22px; }
        .modal p { margin: 0 0 12px; color: #555; }
        .modal ul { margin: 8px 0 16px; padding-left: 18px; }
        .modal-actions { display:flex; gap:10px; justify-content:flex-end; }
        .modal-actions .btn { padding:10px 14px; border-radius: 10px; border: 1px solid #e5e5e5; background:#fff; cursor:pointer; font-weight:600; }
        .modal-actions .btn.primary { background: linear-gradient(135deg, #e31e24 0%, #b71c1c 100%); color:#fff; border-color: transparent; }

        @keyframes shake { 10%, 90% { transform: translateX(-1px); } 20%, 80% { transform: translateX(2px); } 30%, 50%, 70% { transform: translateX(-4px);} 40%, 60% { transform: translateX(4px);} }
        .need-selection { animation: shake .5s linear both; }

        @media (max-width: 768px) {
            .nav-bar {
                padding: 12px 20px;
            }

            .section-title {
                padding: 0 20px;
            }

            .candidates-sections {
                padding: 0 20px;
            }

            /* Dos columnas en 768px */
            .planchas-grid .plancha-card {
                flex: 1 1 calc((100% - 24px) / 2);
                max-width: calc((100% - 24px) / 2);
            }

            .candidates-photos,
            .candidates-info {
                grid-template-columns: 1fr;
            }

            /* T�tulos responsivos */
            .titulo-decorado {
                font-size: 2.2rem;
                margin-top: 18px;
            }

            .subtitulo-decorado {
                font-size: 1.3rem;
                padding: 14px 0;
                margin-bottom: 36px;
            }

            /* Tarjetones m�s compactos */
            .plancha-card {
                padding: 14px;
            }

            .plancha-header {
                gap: 10px;
                margin-bottom: 12px;
            }

            .plancha-chip {
                font-size: 11px;
                padding: 5px 9px;
            }

            .plancha-num {
                width: 26px;
                height: 26px;
                font-size: 11px;
            }

            /* Imagen del tarjet�n 100% ancho contenedor */
            .imagen-tarjeton img {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            /* Una columna en pantallas pequeñas */
            .planchas-grid .plancha-card {
                flex: 1 1 100%;
                max-width: 100%;
            }
        }

        .section-title {
            padding: 0 20px;
        }

        .candidates-sections {
            padding: 0 20px;
        }

        .candidates-photos,
        .candidates-info {
            grid-template-columns: 1fr;
        }

        html,
        body {
            overflow-x: hidden;
        }

        /* Extra peque�o */
        @media (max-width: 420px) {
            .titulo-decorado {
                font-size: 1.9rem;
            }

            .subtitulo-decorado {
                font-size: 1.15rem;
                padding: 12px 0;
            }

            .plancha-card {
                padding: 12px;
            }

            .plancha-chip {
                font-size: 10px;
            }

            .plancha-num {
                width: 24px;
                height: 24px;
                font-size: 10px;
            }
        }
    </style>
</head>

<body>
    <site-header></site-header>

    <h2 class="titulo-decorado">. Estudiantes .</h2>

    <section class="candidates-sections">
        <h2 class="subtitulo-decorado">Candidatos sala general</h2>
        <div class="planchas-grid">
            <!-- Plancha 01 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha 02 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha 03 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha 04 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha Voto en blanco -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

        </div>
    </section>
    <section class="candidates-sections">
        <h2 class="subtitulo-decorado">Candidatos consejo superior</h2>

        <div class="planchas-grid">
            <!-- Plancha 01 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">01</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha 02 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">02</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha Voto en blanco -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="Voto en blanco">
                </div>
            </div>
        </div>
    </section>
    <section class="candidates-sections">
        <h2 class="subtitulo-decorado">Candidatos consejo academico</h2>

        <div class="planchas-grid">
            <!-- Plancha 01 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">01</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>

            <!-- Plancha 02 -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">02</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="FESC">
                </div>
            </div>
            <!-- Plancha Voto en blanco -->
            <div class="plancha-card">
                <div class="plancha-header">
                    <span class="plancha-chip">Plancha</span>
                    <span class="plancha-num">X</span>
                </div>
                <div class="imagen-tarjeton">
                    <img src="../public/voto-blanco.png" alt="Voto en blanco">
                </div>
            </div>
        </div>
    </section>

    <div class="vote-actions">
        <button class="btn-register" id="registerVote"><span class="material-symbols-outlined">how_to_vote</span> Registrar voto</button>
    </div>

    <div class="modal-overlay" id="confirmOverlay">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
            <h3 id="confirmTitle">Confirmar voto</h3>
            <p>Estás a punto de registrar tu voto con las siguientes selecciones:</p>
            <ul id="summaryList"></ul>
            <div class="modal-actions">
                <button class="btn" id="cancelConfirm">Cancelar</button>
                <button class="btn primary" id="confirmVote">Confirmar</button>
            </div>
        </div>
    </div>

    <site-footer></site-footer>
    <script>
        // Selección por sección con efecto visual
        (function(){
            document.querySelectorAll('.planchas-grid').forEach(grid => {
                grid.addEventListener('click', (ev) => {
                    const card = ev.target.closest('.plancha-card');
                    if(!card || !grid.contains(card)) return;
                    const isSelected = card.classList.contains('selected');
                    grid.querySelectorAll('.plancha-card').forEach(c => c.classList.remove('selected'));
                    if(isSelected){
                        grid.classList.remove('has-selection');
                        return;
                    }
                    card.classList.add('selected');
                    grid.classList.add('has-selection');
                });
            });
        })();

        // Validación por sección y modal de confirmación
        (function(){
            const overlay = document.getElementById('confirmOverlay');
            const registerBtn = document.getElementById('registerVote');
            const summary = document.getElementById('summaryList');
            const cancelBtn = document.getElementById('cancelConfirm');
            const confirmBtn = document.getElementById('confirmVote');

            function getSectionSelections(){
                const result = [];
                document.querySelectorAll('.candidates-sections').forEach(section => {
                    const title = section.querySelector('.subtitulo-decorado')?.textContent?.trim() || 'Sección';
                    const grid = section.querySelector('.planchas-grid');
                    const sel = grid ? grid.querySelector('.plancha-card.selected') : null;
                    result.push({ sectionEl: section, title, grid, sel });
                });
                return result;
            }

            function openModal(items){
                summary.innerHTML = '';
                items.forEach(it => {
                    const n = it.sel ? (it.sel.querySelector('.plancha-num')?.textContent || '') : '';
                    const label = (n && n.toUpperCase()==='X') ? 'Voto en blanco' : `Plancha ${n}`;
                    const li = document.createElement('li');
                    li.textContent = `${it.title}: ${label}`;
                    summary.appendChild(li);
                });
                overlay.classList.add('show');
            }

            function closeModal(){ overlay.classList.remove('show'); }

            registerBtn?.addEventListener('click', () => {
                const data = getSectionSelections();
                const missing = data.filter(d => !d.sel);
                if(missing.length){
                    // resaltar primera sección faltante
                    const m = missing[0];
                    m.grid?.classList.add('need-selection');
                    m.grid?.scrollIntoView({ behavior:'smooth', block:'center' });
                    setTimeout(()=> m.grid?.classList.remove('need-selection'), 700);
                    return;
                }
                openModal(data);
            });

            cancelBtn?.addEventListener('click', closeModal);
            overlay?.addEventListener('click', (e)=>{ if(e.target === overlay) closeModal(); });
            confirmBtn?.addEventListener('click', ()=>{
                // Aquí podrías enviar los datos al backend
                closeModal();
                alert('Voto registrado. ¡Gracias por participar!');
            });
        })();
    </script>
</body>

</html>
