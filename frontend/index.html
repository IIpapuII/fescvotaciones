<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FESC Elecciones 2025</title>
    <link rel="icon" href="public/favicon.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

</head>

<body>
    <site-header></site-header>

    <section class="hero fade-in">
        <div class="hero-content">
            <h1 class="hero-title">Ejerce tu Derecho al Voto</h1>
            <p class="hero-subtitle">
                Tu voz importa. Participa en el proceso democrático de nuestra institución y construye el futuro de
                FESC.
            </p>
            <div class="hero-info">
                <div class="time-box">
                    <span class="material-symbols-outlined" aria-hidden="true">schedule</span>
                    <span>Horarios de votación</span>
                </div>
                <div class="schedule">
                    <div class="schedule-item">
                        <div class="schedule-title"><strong>Mesa 1</strong> Cancha FESC • <strong>Mesa 2</strong> Parque
                            Banderas</div>
                        <div class="schedule-time">Lunes a viernes: 8:00 am – 11:00 am, 2:00 pm – 5:00 pm y 6:00 pm –
                            8:30 pm</div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-title"><strong>Mesa 3</strong> • Cancha FESC </div>
                        <div class="schedule-time">Sabado: 8:00 am – 11:00 am y 1:00 pm – 5:00 pm</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Vote CTA: before candidates -->
    <section class="vote-cta fade-in">
        <div class="vote-cta-inner">
            <div class="vote-cta-badge"><span class="material-symbols-outlined" aria-hidden="true">campaign</span> ¡Participa ahora!</div>
            <div class="vote-cta-icon"><span class="material-symbols-outlined" aria-hidden="true">how_to_vote</span></div>
            <h2 class="vote-cta-title">Vota aquí</h2>
            <p class="vote-cta-subtitle">Inicia la verificación de identidad para continuar con tu votación.</p>
            <a href="/votaciones/" class="category-button cta-primary" aria-label="Ir a validación de identidad">Ir a votación</a>
        </div>
    </section>

    <section class="candidates-section fade-in">
        <h2 class="candidates-title">Conoce a Nuestros Candidatos</h2>
        <div class="categories-grid">
            <div class="category-card">
                <div class="category-icon"><span class="material-symbols-outlined">groups</span></div>
                <h2 class="category-title">Estudiantes</h2>
                <p class="category-description">
                    Explora las planchas postuladas por estudiantes y conoce sus propuestas para la Sala General.
                </p>
                <a href="views/tarjeton_estudiantes.html" class="category-button">Ver Candidatos</a>
            </div>

            <div class="category-card">
                <div class="category-icon"><span class="material-symbols-outlined">school</span></div>
                <h2 class="category-title">Docentes</h2>
                <p class="category-description">
                    Descubre las propuestas del profesorado y cómo buscan aportar al Consejo Superior.
                </p>
                <a href="views/tarjeton_docentes.html" class="category-button">Ver Candidatos</a>
            </div>

            <div class="category-card">
                <div class="category-icon"><span class="material-symbols-outlined">workspace_premium</span></div>
                <h2 class="category-title">Graduados</h2>
                <p class="category-description">
                    Revisa las planchas de graduados y sus compromisos para fortalecer la representación institucional.
                </p>
                <a href="views/tarjeton_graduados.html" class="category-button">Ver Candidatos</a>
            </div>
        </div>
    </section>

    <section class="info-section fade-in">
        <div class="info-container">
            <h2 class="candidates-title">Información del Proceso Electoral</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3 class="info-card-title">¿Quiénes pueden votar?</h3>
                    <ul class="info-card-text">
                        <li>Estudiantes matriculados (presenciales - virtuales - distancia) y estudiantes de
                            articulación votan por respresentantes estudiantiles.</li>
                        <li>Docentes pueden votar por representantes docentes.</li>
                        <li>Egresados/Graduados pueden votar por representantes Egresados.</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h3 class="info-card-title">¿Cómo votar?</h3>
                    <p class="info-card-text">
                        El proceso de votación se realizará de manera presencial y virtual según las indicaciones
                        institucionales a continuacion:

                    </p>
                    <button style="margin-top: 25px;" type="button" id="open-tutorial" class="category-button"
                        aria-haspopup="dialog">Aprende como</button>
                </div>
                <div class="info-card">
                    <h3 class="info-card-title">Fechas importantes</h3>
                    <p class="info-card-text">
                        Mantente informado sobre las fechas clave del proceso electoral a través de los canales
                        oficiales.
                    </p>
                </div>
                <div class="info-card info-card-accent">
                    <h3 class="info-card-title"><span class="material-symbols-outlined"
                            aria-hidden="true">calendar_today</span> Rango de fechas</h3>
                    <p class="info-card-text">
                        Votaciones abiertas del lunes 6 de Octubre al sábado 11 de Octubre.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <site-footer></site-footer>

    <!-- Modal Tutorial: Cómo votar -->
    <div id="tutorial-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="tutorial-title">
        <div class="modal-overlay" data-close="true"></div>
        <div class="modal-dialog" role="document">
            <button class="modal-close" aria-label="Cerrar" data-close="true">&times;</button>
            <div class="modal-header">
                <h2 id="tutorial-title">Tutorial: Cómo votar</h2>
            </div>
            <div class="modal-body">
                <div class="tutorial-step" id="tutorial-step"></div>
                <div class="tutorial-image-wrap">
                    <img id="tutorial-image" src="" alt="Paso del tutorial">
                </div>
            </div>
            <div class="modal-footer">
                <div class="step-dots" id="tutorial-dots"></div>
                <div class="nav-buttons">
                    <button id="btn-prev" class="button-ghost" type="button">Anterior</button>
                    <button id="btn-next" class="category-button" type="button">Siguiente</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Animación de scroll suave
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (!href || href === '#') {
                    // Ignorar enlaces vacíos como el del modal
                    return;
                }
                e.preventDefault();
                try {
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } catch (_) {
                    // Si el selector no es válido, no hacer nada
                }
            });
        });

        // Intersection Observer para animaciones de fade-in
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observar todos los elementos con clase fade-in
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Animación de las tarjetas de categorías
        const categoryCards = document.querySelectorAll('.category-card');
        categoryCards.forEach((card, index) => {
            card.style.animationDelay = `${index * 0.1}s`;
            card.style.animation = 'slideUp 0.6s ease forwards';
        });

        // Animación de las tarjetas de información
        const infoCards = document.querySelectorAll('.info-card');
        const infoObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, index * 100);
                }
            });
        }, observerOptions);

        infoCards.forEach(card => {
            infoObserver.observe(card);
        });

        // Animación de entrada para imágenes y textos de "highlights"
        const highlights = document.querySelectorAll('.highlight');
        const highlightsObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    // Stagger basado en su posición en el DOM
                    const idx = Array.from(highlights).indexOf(entry.target);
                    setTimeout(() => {
                        entry.target.classList.add('visible');
                    }, idx * 120);
                }
            });
        }, observerOptions);

        highlights.forEach(h => highlightsObserver.observe(h));

        // Animación de hover mejorada para botones
        const buttons = document.querySelectorAll('.category-button');
        buttons.forEach(button => {
            button.addEventListener('mouseenter', function () {
                this.style.transform = 'translateY(-2px) scale(1.02)';
            });

            button.addEventListener('mouseleave', function () {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Animación de pulso para el badge de elecciones
        const electionBadge = document.querySelector('.time-box');
        setInterval(() => {
            electionBadge.style.transform = 'scale(1.02)';
            setTimeout(() => {
                electionBadge.style.transform = 'scale(1)';
            }, 200);
        }, 3000);

        // Keyframes para animaciones
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);

        // =====================
        // Fecha de elecciones (fácil de editar)
        // Edita estos valores sin tocar la lógica:
        const ELECTION_DATE = {
            year: 2025,
            month: 10,   // 1-12 (Octubre = 10)
            day: 4,
            hour: 8,     // 0-23 (8 am)
            minute: 0
        };
        // Expone la fecha a otros componentes (header usa esto)
        window.ELECTION_DATE = ELECTION_DATE;
        try { localStorage.setItem('ELECTION_DATE', JSON.stringify(ELECTION_DATE)); } catch (_) {}
        function getBogotaTimestamp({ year, month, day, hour, minute }) {
            return Date.UTC(year, month - 1, day, hour + 5, minute, 0);
        }

        const targetDate = getBogotaTimestamp(ELECTION_DATE);

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").textContent = String(days).padStart(2, '0');
            document.getElementById("hours").textContent = String(hours).padStart(2, '0');
            document.getElementById("minutes").textContent = String(minutes).padStart(2, '0');
            document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Adjust body padding to actual header height to avoid gaps
        function updateHeaderOffset() {
            const headerEl = document.querySelector(".header");
            if (headerEl) {
                const h = headerEl.offsetHeight;
                document.documentElement.style.setProperty("--header-height", h + "px");
            }
        }

        // Initial set and on resize
        window.addEventListener("DOMContentLoaded", updateHeaderOffset);
        window.addEventListener("load", updateHeaderOffset);
        window.addEventListener("resize", updateHeaderOffset);

        // Also update when header style changes on scroll
        const _origScrollHandler = window.onscroll;
        window.addEventListener("scroll", () => {
            updateHeaderOffset();
        });
    </script>
    <script src="js/components.js"></script>
    <!-- Fallback script para asegurar apertura del modal aunque falle otro JS -->
    <script>
        (function () {
            try {
                var btn = document.getElementById('open-tutorial');
                var modal = document.getElementById('tutorial-modal');
                function __open() { if (!modal) return; modal.classList.add('open'); modal.setAttribute('aria-hidden', 'false'); document.body.style.overflow = 'hidden'; }
                function __close() { if (!modal) return; modal.classList.remove('open'); modal.setAttribute('aria-hidden', 'true'); document.body.style.overflow = ''; }
                if (btn) { btn.addEventListener('click', function (e) { e.preventDefault(); __open(); }); }
                window.__openTutorial = __open;
                window.__closeTutorial = __close;
            } catch (e) { /* noop */ }
        })();
    </script>
    <script>
        // =====================
        // Modal Tutorial: pasos con imágenes (robusto)
        // =====================
        (function () {
            const modal = document.getElementById('tutorial-modal');
            const openBtn = document.getElementById('open-tutorial');
            if (!modal || !openBtn) return; // Nada que hacer si falta algo

            const steps = [
                {
                    title: 'Paso 1 - Valida tus datos',
                    text: 'Dirígete a la sección de validación e ingresa tu número de identificación.',
                    image: 'public/tutorial/paso 1.png'
                },
                {
                    title: 'Paso 2 - Selecciona tus candidatos',
                    text: 'Revisa cuidadosamente las planchas y candidatos disponibles en el tarjetón digital. Selecciona los candidatos por lo que votaras (por cada sección, una sola seleccion)',
                    image: 'public/tutorial/paso 2.png'
                },
                {
                    title: 'Paso 3 - Confirma tu voto',
                    text: 'Ya despues de que hayas elegido tus candidatos dale al boton de "Confirmar voto" en la parte inferior.',
                    image: 'public/tutorial/paso 3.png'
                },
                {
                    title: 'Paso 4 - Envia tu voto',
                    text: 'Recibiras un pequeño resumen de tus elecciones, rectifica y envia tu voto.',
                    image: 'public/tutorial/paso 4.png'
                },
            ]; 

            const overlay = modal.querySelector('.modal-overlay');
            const dialog = modal.querySelector('.modal-dialog');
            const closeEls = modal.querySelectorAll('[data-close]');
            const stepContainer = modal.querySelector('#tutorial-step');
            const imgEl = modal.querySelector('#tutorial-image');
            const dotsEl = modal.querySelector('#tutorial-dots');
            const prevBtn = modal.querySelector('#btn-prev');
            const nextBtn = modal.querySelector('#btn-next');

            let idx = 0;

            function renderDots() {
                dotsEl.innerHTML = '';
                steps.forEach((_, i) => {
                    const b = document.createElement('button');
                    b.type = 'button';
                    b.className = 'dot' + (i === idx ? ' active' : '');
                    b.setAttribute('aria-label', 'Ir al paso ' + (i + 1));
                    b.addEventListener('click', () => { idx = i; renderStep(); });
                    dotsEl.appendChild(b);
                });
            }

            function renderStep() {
                const s = steps[idx];
                stepContainer.innerHTML = `<h3>${s.title}</h3><p>${s.text}</p>`;
                imgEl.src = s.image;
                imgEl.alt = `${s.title} - imagen`;
                if (prevBtn) prevBtn.disabled = idx === 0;
                if (nextBtn) nextBtn.textContent = idx === steps.length - 1 ? 'Finalizar' : 'Siguiente';
                renderDots();
            }

            function openModal() {
                idx = 0;
                renderStep();
                modal.classList.add('open');
                modal.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';
                // Enfocar el primer control accesible
                (prevBtn || nextBtn || modal).focus?.();
            }

            function closeModal() {
                modal.classList.remove('open');
                modal.setAttribute('aria-hidden', 'true');
                document.body.style.overflow = '';
                openBtn.focus?.();
            }

            // Evitar que un click dentro del diálogo cierre el modal
            dialog?.addEventListener('click', (e) => e.stopPropagation());

            // Apertura
            openBtn.addEventListener('click', (e) => { e.preventDefault(); openModal(); });

            // Cierres
            overlay?.addEventListener('click', closeModal);
            closeEls.forEach(el => el.addEventListener('click', closeModal));

            // Navegación
            prevBtn?.addEventListener('click', () => { if (idx > 0) { idx--; renderStep(); } });
            nextBtn?.addEventListener('click', () => { if (idx < steps.length - 1) { idx++; renderStep(); } else { closeModal(); } });

            // Teclado (Escape / Flechas)
            document.addEventListener('keydown', (ev) => {
                if (!modal.classList.contains('open')) return;
                if (ev.key === 'Escape') closeModal();
                if (ev.key === 'ArrowRight') nextBtn?.click();
                if (ev.key === 'ArrowLeft') prevBtn?.click();
            });

            // Expone helpers por si mantienes el fallback
            window.__openTutorial = openModal;
            window.__closeTutorial = closeModal;
        })();
    </script>
</body>

</html>
